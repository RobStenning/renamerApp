<!DOCTYPE html>
<html lang="en">
<head>
    <title>RENAMER</title>
</head>
<body>
    <div>
    <h1>RENAMER</h1>
    <br>
    <form id="setCode">the project code is set to: <a id="code">XXXXX</a>
        <br>
        <input type="text" id="projectcode" placeholder="XXXXX">
        <button type="submit">SET</button>
    </form>
    <br>
    <div>Select the txt file location</div>
    <!--
        tested this line to grab txt URL, failed on sending from HTML to JS
        <button type="file" id="txtFileLocation" accept=".txt" onclick="this.value=electron.remote.dialog.showOpenDialog()[0]">Choose File</button>
    -->
    <button type="file" id="txtFileLocation" accept=".txt">Choose File</button>
    <p></p>
    <div>Select the PDF folder location</div>
    <input type="file" id="pdfFolder" webkitdirectory>
    <p></p>
    <form id="rename">
    <button type="submit">RENAME</button>
    </form>
    </div>
    <button id="testbutton" onclick="this.value=electron.remote.dialog.showOpenDialog()[0]" >Update File Test</button>
<script>
    //const electron = require('electron');
    //const {ipcRenderer} = electron;

    const ipc = require('electron').ipcRenderer;

    //set project code form   
    function setCode(event){
        event.preventDefault();
        const projectcode = document.querySelector('#projectcode').value;
        //ipcRenderer.send('projectcode:add', projectcode);
        //ipcRenderer.on('projectcode:add', function(event, projectcode){
        const setProjectCode = document.querySelector('#code');
        console.log(projectcode);
        setProjectCode.innerHTML = projectcode;
        //console.log(setProjectCode);
        //setProjectCode.innerHTML = projectcode;
    }
    
    ipc.on('folderlocation:add', function(event, folderlocation){
        const setfolderLocation = document.querySelector('#folderLocation');
        setfolderLocation.innerHTML = folderlocation;
    })
    
    //SET code button
    const setCodeForm = document.querySelector('#setCode');
    setCodeForm.addEventListener('submit', setCode);

    //RENAME button
    function message(event){
        event.preventDefault();
        console.log('running renamer');
        console.log(txtFile);
    }
    const renameSubmit = document.querySelector('#rename');
    renameSubmit.addEventListener('submit', message);

    //catch txt file location
    //https://medium.com/jspoint/working-with-files-i-o-in-an-electron-application-b4d2de403f54

    //test areas
    //currently working
    const txtButton = document.getElementById('txtFileLocation');

    txtButton.addEventListener('click', function (event) {
        ipc.send('open-file-dialog-for-file')
    });

    ipc.on('selected-file', function (event, path) {
    console.log('Full path: ', path);
});
    /*
    tested HTML to JS, URL worked but exporting issues
    function testButton(){
    document.getElementById('testbutton').value;
     };
    
    function testFunction(){
        document.getElementById('txtFileLocation').value;
        console.log(txtFileLocation.value);
    }
    */
    //tried to export function from HTML to JS but ran in to errors
    //export { testFunction };

</script>

</body>
</html>