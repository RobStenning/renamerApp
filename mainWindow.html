<!DOCTYPE html>
<html lang="en">
<head>
    <title>RENAMER</title>
    <link href="./main.css" rel="stylesheet">

</head>
<body>
    <div>
    <h1>RENAMER</h1>
    <br>
    <div>Select the project code
        <form class="basic" id="setCode">Current project code: <a id="code">XXXXX</a>
            <br>
            <input type="text" id="projectcode" placeholder="XXXXX">
            <button type="submit" id="submitprojectcode">SET</button>
        </form>
    </div>
    <br>
    <div>Select the txt file location</div>
    <div>Current file: 
        <a class="basic" id="currentFile">none</a>
    </div>
    <button type="file" id="txtFileLocation" accept=".txt">Choose File</button>
    <p></p>
    <div>Select the PDF folder location</div>
    <div>Current file: 
        <a class="basic" id="currentFolder">none</a>
    </div>
    <button type="directory" id="pdfFolderLocation">Choose Folder</button>
    <p></p>
    <form id="rename">
    <button type="submit">RENAME</button>
    </form>
    </div>
<script>
    const ipc = require('electron').ipcRenderer;

//project code button
const submitCodeSet = document.getElementById('submitprojectcode');
const setCode = document.getElementById('projectcode');

submitCodeSet.addEventListener('click', function (event, data) {
        event.preventDefault();
        data = document.getElementById('code').innerHTML = setCode.value;
        if (data !== '') {
            document.getElementById('code').className = 'complete';
        } else {
            document.getElementById('code').innerHTML = 'set the project code'
            document.getElementById('code').className = 'alert';
        }
        ipc.send('projectcode-set', data);
});

//choose file button
const txtButton = document.getElementById('txtFileLocation');
    txtButton.addEventListener('click', function (event) {
        ipc.send('open-file-dialog-for-file');
});

    ipc.on('selected-file', function (event, path) {
    console.log('Full path: ', path);
    document.getElementById('currentFile').innerHTML = path;
    ipc.send('file-url', path);
    document.getElementById('currentFile').className = 'basic';
});

//choose folder button
    const folderButton = document.getElementById('pdfFolderLocation');
    folderButton.addEventListener('click', function (event) {
        ipc.send('open-folder-dialog-for-folder');
    });

    ipc.on('selected-folder', function (event, folderPath) {
    console.log('Full path: ', folderPath);
    document.getElementById('currentFolder').innerHTML = folderPath;
    ipc.send('folder-url', folderPath);
});
    //RENAME button
    function message(event){
        event.preventDefault();
        if (document.getElementById('code').innerHTML === 'XXXXX'
        &&
        document.getElementById('currentFile').innerHTML === 'none'
        &&
        document.getElementById('currentFolder').innerHTML === 'none'
        ) {
            document.getElementById('code').innerHTML = 'set the project code'
            document.getElementById('code').className = 'alert';
            document.getElementById('currentFile').className = 'alert';
            document.getElementById('currentFolder').className = 'alert';
            console.log('situation 1')

        } else if (document.getElementById('currentFile').innerHTML === 'none') {
            document.getElementById('currentFile').className = 'alert';
            console.log('situation 2')
        } else {
            document.getElementById('code').className = 'complete';
            document.getElementById('currentFile').className = 'alert';
            console.log('situation 3')
        }
        ipc.send('rename');
        //console.log(txtFile);
    }
    const renameSubmit = document.querySelector('#rename');
    renameSubmit.addEventListener('submit', message);

    //test areas


</script>

</body>
</html>