<!DOCTYPE html>
<html lang="en">
<head>
    <title>RENAMER</title>
</head>
<body>
    <div>
    <h1>RENAMER</h1>
    <br>
    <div>Select the project code
        <form id="setCode">Current project code: <a id="code">XXXXX</a>
            <br>
            <input type="text" id="projectcode" placeholder="XXXXX">
            <button type="submit" id="submitprojectcode">SET</button>
        </form>
    </div>
    <br>
    <div>Select the txt file location</div>
    <div>Current file: 
        <a id="currentFile">none</a>
    </div>
    <button type="file" id="txtFileLocation" accept=".txt">Choose File</button>
    <p></p>
    <div>Select the PDF folder location</div>
    <div>Current file: 
        <a id="currentFolder">none</a>
    </div>
    <button type="directory" id="pdfFolderLocation">Choose Folder</button>
    <p></p>
    <form id="rename">
    <button type="submit">RENAME</button>
    </form>
    </div>
<script>
    const ipc = require('electron').ipcRenderer;

//project code button
const submitCodeSet = document.getElementById('submitprojectcode');
const setCode = document.getElementById('projectcode');

submitCodeSet.addEventListener('click', function (event, data) {
        event.preventDefault();
        data = document.getElementById('code').innerHTML = setCode.value;
        console.log(data);
        ipc.send('projectcode-set', data);
});

//choose file button

const txtButton = document.getElementById('txtFileLocation');
    txtButton.addEventListener('click', function (event) {
        ipc.send('open-file-dialog-for-file')
    });

    ipc.on('selected-file', function (event, path) {
    console.log('Full path: ', path);
    document.getElementById('currentFile').innerHTML = path;
});

//choose folder button
    const folderButton = document.getElementById('pdfFolderLocation');
    folderButton.addEventListener('click', function (event) {
        ipc.send('open-folder-dialog-for-folder');
    });

    ipc.on('selected-folder', function (event, folderPath) {
    console.log('Full path: ', folderPath);
    document.getElementById('currentFolder').innerHTML = folderPath;
});
    //RENAME button - needs work
    function message(event){
        event.preventDefault();
        console.log('running renamer');
        ipc.send('rename');
        //console.log(txtFile);
    }
    const renameSubmit = document.querySelector('#rename');
    renameSubmit.addEventListener('submit', message);

    //test areas



/*
    //set project code form   
    function setCode(event){
        event.preventDefault();
        const projectcode = document.querySelector('#projectcode').value;
        //ipc.send('projectcode:add', projectcode);
        //ipcRenderer.on('projectcode:add', function(event, projectcode){
        const setProjectCode = document.querySelector('#code');
        console.log(projectcode);
        setProjectCode.innerHTML = projectcode;
        //console.log(setProjectCode);
        //setProjectCode.innerHTML = projectcode;
    }
    */
    
/*
    ipc.on('selected-file', function (event, path) {
    console.log('Full path: ', path);
    document.getElementById('currentFile').innerHTML = path;
});
*/

</script>

</body>
</html>